# .sqa/config.yml - jenkins-pipeline-library configuration file
sqa_criteria:
  qc_style:
    repos:
      ai4life:
        container: testing
        commands:
        - pip3 install --no-cache-dir -e .
        - flake8 --statistics --tee --output-file=/srv/app/flake8.log --format=pylint ai4life api tests

  qc_coverage:
    repos:
      ai4life:
        container: testing
        commands:
        - pip3 install --no-cache-dir -e .
        - pytest --cov=api --cov=ai4life --cov-report=html:/srv/app/htmlcov --cov-report=term-missing tests

  qc_security:
    repos:
      ai4life:
        container: testing
        commands:
        - pip3 install --no-cache-dir -e .
        - mkdir -p /srv/app/bandit
        - bandit -r ai4life api -x tests -o /srv/app/bandit/index.html

environment:
  GIT_COMMITTER_NAME: "Fahimeh Alibabaei "
  GIT_COMMITTER_EMAIL: "khadijeh.alibabaei@kit.edu"
  JPL_DOCKERFORCEBUILD: "True"
  LANG: C.UTF-8

timeout: 900
